<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Materials Calculator</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen flex flex-col items-center p-6">

<div class="bg-gray-800 shadow-2xl rounded-2xl p-6 w-full max-w-6xl">
  <h1 class="text-3xl font-bold text-center text-yellow-400 mb-6">‚ö° Premium Materials Calculator ‚ö°</h1>

  <!-- Customer Details -->
  <div class="grid grid-cols-2 gap-4 mb-6">
    <input id="customerName" class="border p-2 rounded-lg bg-gray-700 text-white" placeholder="Customer Name">
    <input id="contactNo" class="border p-2 rounded-lg bg-gray-700 text-white" placeholder="Contact Number">
    <input id="location" class="border p-2 rounded-lg bg-gray-700 text-white" placeholder="Location / Address">
    <input id="houseMeasure" class="border p-2 rounded-lg bg-gray-700 text-white" placeholder="House Measurements">
    <input id="electrician" class="border p-2 rounded-lg bg-gray-700 text-white" placeholder="Electrician Name">
    <input id="date" type="date" class="border p-2 rounded-lg bg-gray-700 text-white">
  </div>

  <!-- Material Form -->
  <div class="flex flex-wrap gap-3 mb-6">
    <select id="material" class="border p-2 rounded-lg bg-gray-700 text-white flex-1">
      <option value="">-- Select Material --</option>
      <optgroup label="üõ† Suggested Tools">
        <option>Hammer</option><option>Screwdriver Set</option><option>Pliers</option>
        <option>Drill Machine</option><option>Tester</option><option>Measuring Tape</option>
        <option>Wire Stripper</option><option>Spanner Set</option><option>Wrench</option>
        <option>Spirit Level</option><option>Multimeter</option><option>Clamp Meter</option>
        <option>Insulation Tape</option><option>Crimping Tool</option><option>Pipe Bender</option>
        <option>Ladder</option><option>Safety Gloves</option><option>Safety Helmet</option>
        <option>Torch</option>
      </optgroup>
      <optgroup label="‚ö° Wiring Materials">
        <option>1.0 sqmm Wire</option><option>1.5 sqmm Wire</option><option>2.5 sqmm Wire</option>
        <option>4 sqmm Wire</option><option>6 sqmm Wire</option><option>10 sqmm Wire</option>
        <option>16 sqmm Wire</option><option>Flexible Copper Wire</option>
        <option>Conduit Pipe 20mm</option><option>Conduit Pipe 25mm</option>
        <option>Junction Box 2 Way</option><option>Switch 6A</option><option>Switch 16A</option>
        <option>Socket 6A</option><option>Socket 16A</option><option>Fan Regulator</option>
        <option>Distribution Board 8 Way</option><option>MCB Single Pole 6A</option>
        <option>RCCB 40A</option><option>MCCB 100A</option><option>LED Tube Light</option>
        <option>LED Bulb 9W</option><option>Street Light 90W</option><option>UPS 1kVA</option>
        <option>Battery 150Ah</option><option>Earthing Rod Copper</option><option>Lightning Arrester</option>
        <option>Cable Tray</option><option>Cable Tie Nylon</option><option>Cable Lugs Copper</option>
      </optgroup>
      <optgroup label="üö∞ Plumbing Materials">
        <option>PVC Pipe 1/2‚Äù</option><option>PVC Pipe 1‚Äù</option><option>CPVC Pipe 1/2‚Äù</option>
        <option>PPR Pipe 25mm</option><option>GI Pipe 1/2‚Äù</option><option>Elbow PVC 90¬∞</option>
        <option>Tee PVC</option><option>Ball Valve PVC</option><option>Gate Valve Brass</option>
        <option>Stop Cock</option><option>Bib Cock</option><option>Shower Head</option>
        <option>Flush Tank</option><option>Wall Mixer</option><option>Sink Mixer</option>
        <option>Water Tank 1000L</option><option>Float Valve</option><option>NRV Valve</option>
        <option>P-Trap</option><option>Floor Drain SS</option><option>Flexible Connection Pipe</option>
        <option>Teflon Tape</option><option>Solar Water Heater 200L</option><option>Submersible Pump 2HP</option>
      </optgroup>
    </select>
    <input id="customMaterial" class="border p-2 rounded-lg bg-gray-700 text-white flex-1" placeholder="Custom Material (if not in list)">
    <input id="type" class="border p-2 rounded-lg bg-gray-700 text-white w-40" placeholder="Type (e.g., 1.5 sqmm)">
    <input id="quantity" type="number" class="border p-2 rounded-lg bg-gray-700 text-white w-28" placeholder="Qty">
    <select id="unit" class="border p-2 rounded-lg bg-gray-700 text-white w-28">
      <option value="Nos">Nos</option><option value="Meters">Meters</option><option value="Kg">Kg</option><option value="Feet">Feet</option>
    </select>
    <input id="rate" type="number" class="border p-2 rounded-lg bg-gray-700 text-white w-28" placeholder="Rate">
    <button onclick="addMaterial()" class="bg-yellow-500 text-gray-900 px-4 rounded-lg shadow font-bold">‚ûï Add</button>
  </div>

  <!-- Table -->
  <table class="w-full text-left border border-gray-700" id="materialsTable">
    <thead class="bg-yellow-500 text-gray-900">
      <tr><th class="p-2">Material</th><th class="p-2">Type</th><th class="p-2">Qty</th><th class="p-2">Unit</th><th class="p-2">Rate</th><th class="p-2">Amount</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="mt-6 text-right">
    <button onclick="exportPDF()" class="bg-yellow-500 text-gray-900 px-6 py-2 rounded-lg shadow font-bold">üìÑ Export PDF</button>
  </div>
</div>

<script>
function addMaterial(){
  const material = document.getElementById("customMaterial").value || document.getElementById("material").value;
  const type = document.getElementById("type").value;
  const qty = document.getElementById("quantity").value;
  const unit = document.getElementById("unit").value;
  const rate = document.getElementById("rate").value;
  const amount = qty * rate;

  if(!material || !qty || !rate){ alert("Fill all fields"); return; }

  const row = `<tr class="border border-gray-700">
    <td class="p-2">${material}</td>
    <td class="p-2">${type}</td>
    <td class="p-2">${qty}</td>
    <td class="p-2">${unit}</td>
    <td class="p-2">${rate}</td>
    <td class="p-2">${amount}</td>
  </tr>`;
  document.querySelector("#materialsTable tbody").insertAdjacentHTML('beforeend', row);
}

function exportPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("p","pt","a4");

  // Title Bar
  doc.setFillColor(40,40,40);
  doc.rect(0,0,600,40,"F");
  doc.setTextColor(255,215,0);
  doc.setFontSize(18);
  doc.text("‚ö° Premium Materials Bill ‚ö°", 200,25);

  // Customer details
  doc.setFontSize(12);
  doc.setTextColor(255,255,255);
  let y=60;
  const details=[
    ["Customer:",document.getElementById("customerName").value],
    ["Contact:",document.getElementById("contactNo").value],
    ["Address:",document.getElementById("location").value],
    ["House:",document.getElementById("houseMeasure").value],
    ["Electrician:",document.getElementById("electrician").value],
    ["Date:",document.getElementById("date").value]
  ];
  details.forEach(d=>{ doc.text(`${d[0]} ${d[1]}`,40,y); y+=20; });

  // Table
  const rows=[];
  document.querySelectorAll("#materialsTable tbody tr").forEach(tr=>{
    rows.push([...tr.children].map(td=>td.innerText));
  });
  doc.autoTable({
    head:[["Material","Type","Qty","Unit","Rate","Amount"]],
    body:rows,
    startY: y+10,
    headStyles:{fillColor:[255,215,0],textColor:[30,30,30],fontStyle:"bold"},
    bodyStyles:{fillColor:[50,50,50],textColor:[255,255,255]},
    alternateRowStyles:{fillColor:[70,70,70]},
    margin:{left:40,right:40}
  });

  // Signatures
  const finalY = doc.lastAutoTable.finalY + 40;
  doc.setTextColor(255,255,255);
  doc.text("Customer Signature",60,finalY);
  doc.text("Electrician Signature",240,finalY);
  doc.text("Retailer Signature",440,finalY);

  doc.save("Premium-Materials-Bill.pdf");
}
</script>

</body>
</html>

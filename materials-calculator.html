<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Materials Calculator</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">
  <div class="bg-white shadow-xl rounded-2xl p-6 w-full max-w-5xl">
    <h1 class="text-3xl font-bold text-center text-indigo-600 mb-4">Materials Calculator</h1>

    <!-- Customer Details -->
    <div class="grid grid-cols-2 gap-4 mb-6">
      <input id="customerName" class="border p-2 rounded-lg" placeholder="Customer Name">
      <input id="contactNo" class="border p-2 rounded-lg" placeholder="Contact Number">
      <input id="location" class="border p-2 rounded-lg" placeholder="Location">
      <input id="houseMeasure" class="border p-2 rounded-lg" placeholder="House Measurements">
      <input id="electrician" class="border p-2 rounded-lg" placeholder="Electrician Name">
      <input id="date" type="date" class="border p-2 rounded-lg">
    </div>

    <!-- Material Form -->
    <div class="flex space-x-3 mb-4">
      <select id="material" class="border p-2 rounded-lg flex-1"></select>
      <input id="type" class="border p-2 rounded-lg w-40" placeholder="Type (ex: 1.5 sqmm)">
      <input id="quantity" type="number" class="border p-2 rounded-lg w-32" placeholder="Qty">
      <select id="unit" class="border p-2 rounded-lg w-32">
        <option value="Nos">Nos</option>
        <option value="Meters">Meters</option>
        <option value="Kg">Kg</option>
        <option value="Feet">Feet</option>
      </select>
      <button onclick="addMaterial()" class="bg-indigo-600 text-white px-4 rounded-lg shadow">Add</button>
    </div>

    <!-- Table -->
    <table class="w-full border text-center" id="materialsTable">
      <thead class="bg-indigo-200">
        <tr>
          <th class="p-2 border">#</th>
          <th class="p-2 border">Material</th>
          <th class="p-2 border">Type</th>
          <th class="p-2 border">Quantity</th>
          <th class="p-2 border">Unit</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- Buttons -->
    <div class="mt-6 flex justify-between">
      <button onclick="downloadPDF()" class="bg-green-600 text-white px-6 py-2 rounded-lg shadow">Download PDF</button>
    </div>
  </div>

<script>
  const materialList = [
    "PVC Wire", "Copper Wire", "Aluminium Wire", "MCB Switch", "Distribution Box", "Switch (6A)", "Switch (16A)", 
    "2 Pin Socket", "3 Pin Socket", "5 Pin Socket", "Concealed Box", "Surface Box", "Fan Regulator", "Bulb Holder",
    "Ceiling Rose", "Pendant Holder", "Angle Holder", "Flex Box", "GI Pipe", "PVC Pipe", "Flexible Pipe", "Saddle Clamp",
    "Junction Box", "DP Switch", "Fuse Unit", "MCB Isolator", "ELCB", "RCCB", "Main Switch", "Busbar", "Earthing Rod",
    "Earth Wire", "Insulation Tape", "Screws (1 inch)", "Screws (2 inch)", "Nails (1 inch)", "Nails (2 inch)",
    "Wall Cutting Blade", "Drill Bit (6mm)", "Drill Bit (10mm)", "Drill Machine", "Hammer", "Pliers", "Cutter", "Tester",
    "Multimeter", "Clamp Meter", "Measuring Tape", "Chisel", "Hacksaw Blade", "File", "Safety Gloves", "Safety Helmet",
    "Safety Shoes", "Ladder", "Extension Board", "Speaker Wire", "TV Cable", "RJ45 Cable", "Telephone Wire", "HDMI Cable",
    "USB Cable", "RJ45 Connector", "HDMI Connector", "RCA Connector", "XLR Connector", "BNC Connector", "JST Connector",
    "Molex Connector", "Automotive Fuse", "Automotive Relay", "Car Battery Cable", "MCB Box", "Light Fitting", "Tube Light",
    "LED Bulb", "Flood Light", "Street Light", "Fan (Ceiling)", "Fan (Wall)", "Fan (Exhaust)", "Geyser Switch", "AC Switch",
    "Washing Machine Socket", "Inverter Cable", "Battery Terminal", "Solar Panel Wire", "Solar Charge Controller",
    "Inverter", "Battery", "UPS", "Generator Cable", "Busbar Chamber", "Industrial Plug", "Industrial Socket"
  ];

  const materialDropdown = document.getElementById("material");
  materialList.forEach(m => {
    const opt = document.createElement("option");
    opt.value = m;
    opt.textContent = m;
    materialDropdown.appendChild(opt);
  });

  let materials = [];

  function addMaterial() {
    const material = document.getElementById("material").value;
    const type = document.getElementById("type").value;
    const qty = document.getElementById("quantity").value;
    const unit = document.getElementById("unit").value;

    if (!material || !qty) return alert("Enter valid material and quantity");

    materials.push({ material, type, qty, unit });
    renderTable();
  }

  function renderTable() {
    const tbody = document.querySelector("#materialsTable tbody");
    tbody.innerHTML = "";
    materials.forEach((m, i) => {
      tbody.innerHTML += `
        <tr>
          <td class="border p-2">${i+1}</td>
          <td class="border p-2">${m.material}</td>
          <td class="border p-2">${m.type}</td>
          <td class="border p-2">${m.qty}</td>
          <td class="border p-2">${m.unit}</td>
        </tr>`;
    });
  }

  function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    doc.setFontSize(18);
    doc.text("Balaji Audios & Electricals", 14, 20);
    doc.setFontSize(12);
    doc.text("Customer Materials Estimate", 14, 28);

    let details = [
      ["Customer Name:", document.getElementById("customerName").value],
      ["Contact No:", document.getElementById("contactNo").value],
      ["Location:", document.getElementById("location").value],
      ["House Measure:", document.getElementById("houseMeasure").value],
      ["Electrician:", document.getElementById("electrician").value],
      ["Date:", document.getElementById("date").value]
    ];

    let y = 40;
    details.forEach(d => {
      doc.text(`${d[0]} ${d[1]}`, 14, y);
      y += 8;
    });

    doc.autoTable({
      startY: y + 5,
      head: [["#", "Material", "Type", "Quantity", "Unit"]],
      body: materials.map((m, i) => [i+1, m.material, m.type, m.qty, m.unit]),
      theme: "grid",
      headStyles: { fillColor: [63, 81, 181] }
    });

    doc.text("Customer Signature: ___________", 14, doc.lastAutoTable.finalY + 20);
    doc.text("Electrician Signature: ___________", 120, doc.lastAutoTable.finalY + 20);

    doc.save("Materials_List.pdf");
  }
</script>
</body>
</html>

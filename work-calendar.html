<!-- WORK CALENDAR -->
<section class="work-calendar" aria-labelledby="calendar-title" style="margin-top:40px;">
  <h3 id="calendar-title">ðŸ“… Work Calendar</h3>
  <p>Upload work photos by date. All photos are public to view & download, but only the uploader can delete.</p>

  <input type="file" id="fileInput" accept="image/*">
  <button onclick="uploadFile()">Upload</button>

  <h4>Uploaded Photos</h4>
  <ul id="fileList" style="list-style:none;padding:0;"></ul>
</section>

<script>
const apiUrl = "https://script.google.com/macros/s/AKfycbzoCDR2Ajs7RO2WrF_pTXR8xa8qeex5nMYSobx-ZyA2S_HJ0ou66nvm4lbwfc5lMH2f/exec"; // paste your Google Apps Script Web App URL here

// Upload photo
function uploadFile() {
  const file = document.getElementById('fileInput').files[0];
  if (!file) { alert("Please select an image."); return; }

  const formData = new FormData();
  formData.append("file", file);

  fetch(apiUrl, { method: "POST", body: formData })
    .then(res => res.text())
    .then(msg => { alert(msg); loadFiles(); })
    .catch(err => alert("Upload failed: " + err));
}

// Load all uploaded photos
function loadFiles() {
  fetch(apiUrl)
    .then(res => res.json())
    .then(data => {
      const fileList = document.getElementById("fileList");
      fileList.innerHTML = "";
      data.forEach(file => {
        const li = document.createElement("li");
        li.style.marginBottom = "10px";
        li.innerHTML = `
          <img src="${file.url}" alt="${file.name}" style="max-width:200px;cursor:zoom-in;" onclick="window.open('${file.url}')">
          <br>
          <a href="${file.url}" download>â¬‡ Download</a>
        `;
        fileList.appendChild(li);
      });
    });
}

loadFiles();
</script>
